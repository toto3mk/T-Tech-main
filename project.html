<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Submit your project inquiry to T-Tech Solutions. Get a custom quote for your software development needs">
    <meta name="keywords" content="project inquiry, software quote, custom development, project consultation">
    <title>T-Tech Software Solutions - Project Inquiry</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'></text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 50%, #f3f4f6 100%);
            background-size: 200% 200%;
            animation: subtleGradient 20s ease infinite;
        }

        @keyframes subtleGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .form-input {
            @apply w-full p-4 border-2 border-gray-200 rounded-xl shadow-sm focus:ring-2 focus:ring-gray-500 focus:border-gray-500 transition-all duration-300 bg-gray-50;
        }

        .form-input:focus {
            box-shadow: 0 0 0 4px rgba(107, 114, 128, 0.1), 0 4px 12px rgba(107, 114, 128, 0.15);
            background-color: white;
            transform: translateY(-2px);
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">

    <header class="bg-white/95 backdrop-blur-lg shadow-lg sticky top-0 z-10 border-b border-gray-200/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="text-2xl font-extrabold bg-gradient-to-r from-gray-800 to-black bg-clip-text text-transparent tracking-wider flex items-center gap-2">
                <div class="p-1.5 bg-gradient-to-br from-gray-700 to-black rounded-lg">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                    </svg>
                </div>
                T-Tech <span class="text-gray-900 font-medium text-xl">Solutions</span>
            </div>
            <nav class="hidden md:flex space-x-8 text-gray-600 font-medium">
                <a href="./index.html" class="hover:text-gray-900 transition">Home</a>
                <a href="#form-section" class="text-gray-900 font-bold">Start Project</a>
                <a href="#" id="services-link" class="hover:text-gray-900 transition">Services</a>
                <a href="#" id="contact-link" class="hover:text-gray-900 transition">Contact</a>
            </nav>
        </div>
    </header>

    <main class="flex-grow">
        <section class="bg-gradient-to-br from-gray-800 via-gray-900 to-black text-white py-20 md:py-28 text-center relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-r from-gray-600/20 via-gray-800/20 to-gray-600/20 animate-pulse"></div>
            <div class="relative z-10">
                <h1 class="text-5xl sm:text-6xl font-bold mb-6 bg-gradient-to-r from-white via-gray-300 to-gray-400 bg-clip-text text-transparent drop-shadow-lg">Innovate Your Future with T-Tech</h1>
                <p class="text-xl text-gray-300 mb-10 font-medium">Custom software solutions for every challenge</p>
                <a href="#form-section"
                    class="inline-block bg-gradient-to-r from-gray-800 to-black hover:from-gray-900 hover:to-black text-white font-bold py-4 px-10 rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 hover:shadow-gray-500/50">
                    Start Your Project Inquiry →
                </a>
            </div>
        </section>

        <section id="form-section" class="max-w-7xl mx-auto p-6 md:p-10 my-12">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">

                <div class="lg:col-span-2 bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl p-8 md:p-10 border border-gray-200/50">
                    <h2 class="text-3xl font-extrabold bg-gradient-to-r from-gray-800 to-black bg-clip-text text-transparent mb-6 border-b-2 border-gray-200 pb-3">New Project Consultation</h2>
                    <p class="text-gray-600 mb-8">Please provide the necessary details for your project</p>

                    <div id="message-box" class="hidden p-4 mb-6 rounded-lg font-medium text-center" role="alert"></div>

                    <form id="project-form" class="space-y-8">
                        <fieldset class="space-y-6">
                            <legend class="text-xl font-semibold text-gray-800 mb-4 pb-1 border-b">Client
                                Details</legend>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="clientName" class="block text-sm font-medium text-gray-700 mb-1">Client
                                        Name <span class="text-red-500">*</span></label>
                                    <input type="text" id="clientName" placeholder="Taha" class="form-input" required>
                                </div>
                                <div>
                                    <label for="contactPerson"
                                        class="block text-sm font-medium text-gray-700 mb-1">Contact Person <span
                                            class="text-red-500">*</span></label>
                                    <input type="text" id="contactPerson" placeholder="Fadhil" class="form-input"
                                        required>
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email
                                        Address <span class="text-red-500">*</span></label>
                                    <input type="email" id="email" placeholder="test@example.com" class="form-input"
                                        required>
                                </div>
                                <div>
                                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number
                                        <span class="text-red-500">*</span></label>
                                    <input type="tel" id="phone" placeholder="07822719497" class="form-input" required>
                                </div>
                            </div>
                        </fieldset>

                        <fieldset class="space-y-6">
                            <legend class="text-xl font-semibold text-gray-800 mb-4 pb-1 border-b"> Project
                                Details</legend>
                            <div>
                                <label for="projectName" class="block text-sm font-medium text-gray-700 mb-1">Project
                                    Name <span class="text-red-500">*</span></label>
                                <input type="text" id="projectName" placeholder="e.g., Mobile Inventory Management App"
                                    class="form-input" required>
                            </div>
                            
                            <div>
                                <label for="projectDescription" class="block text-sm font-medium text-gray-700 mb-1">Project Description</label>
                                <textarea id="projectDescription" placeholder="Briefly describe your project, its goals, and key features."
                                    rows="4" maxlength="500" class="form-input"></textarea>
                                <p class="text-xs text-gray-500 mt-1 text-right">
                                    <span id="description-count">0</span> / 500 characters
                                </p>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label for="dueDate" class="block text-sm font-medium text-gray-700 mb-1">Target Due
                                        Date <span class="text-red-500">*</span></label>
                                    <input type="date" id="dueDate" class="form-input" required>
                                </div>
                                <div>
                                    <label for="budget" class="block text-sm font-medium text-gray-700 mb-1">Estimated
                                        Budget (USD) <span class="text-red-500">*</span></label>
                                    <input type="number" id="budget" placeholder="e.g., 50000" min="1"
                                        class="form-input" required>
                                </div>
                                <div>
                                    <label for="duration" class="block text-sm font-medium text-gray-700 mb-1">Project
                                        Duration (Months)</label>
                                    <input type="number" id="duration" placeholder="e.g., 3" min="1" class="form-input">
                                </div>
                            </div>
                        </fieldset>

                        <div class="pt-4">
                            <button type="submit"
                                class="w-full bg-gradient-to-r from-gray-800 to-black hover:from-gray-900 hover:to-black text-white font-bold py-4 rounded-xl shadow-xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl">
                                Submit Inquiry →
                            </button>
                        </div>
                    </form>
                </div>

                <div class="lg:col-span-1">
                    <div class="bg-gradient-to-br from-gray-50 via-gray-100 to-gray-50 p-8 rounded-2xl shadow-xl border-2 border-gray-200 sticky top-28 backdrop-blur-lg">
                        <h3 class="text-2xl font-bold text-gray-900 mb-5">What Happens Next?</h3>
                        <ol class="relative border-l border-gray-300 space-y-6">
                            <li class="ml-6">
                                <span
                                    class="absolute flex items-center justify-center w-6 h-6 bg-gray-300 rounded-full -left-3"><span
                                        class="text-gray-800 font-bold text-sm">1</span></span>
                                <h4 class="font-semibold text-gray-800">Submission</h4>
                                <p class="text-sm text-gray-600">You send us your project details</p>
                            </li>
                            <li class="ml-6">
                                <span
                                    class="absolute flex items-center justify-center w-6 h-6 bg-gray-300 rounded-full -left-3"><span
                                        class="text-gray-800 font-bold text-sm">2</span></span>
                                <h4 class="font-semibold text-gray-800">Review</h4>
                                <p class="text-sm text-gray-600">Our experts review your requirements</p>
                            </li>
                            <li class="ml-6">
                                <span
                                    class="absolute flex items-center justify-center w-6 h-6 bg-gray-300 rounded-full -left-3"><span
                                        class="text-gray-800 font-bold text-sm">3</span></span>
                                <h4 class="font-semibold text-gray-800">Proposal</h4>
                                <p class="text-sm text-gray-600">We send you a detailed proposal & estimate</p>
                            </li>
                        </ol>
                        <div class="mt-8 border-t pt-6">
                            <p class="text-sm text-gray-600">
                                Need to speak with us directly?
                                <a href="#" id="contact-link-sidebar"
                                    class="text-gray-900 font-medium hover:underline">Contact us now</a>.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="contact-modal" class="fixed inset-0 bg-gray-900/60 backdrop-blur-sm hidden flex items-center justify-center z-50">
        <div id="contact-modal-content" class="relative p-6 border-2 border-gray-200/50 w-96 shadow-2xl rounded-2xl bg-white/95 backdrop-blur-xl">
            <div class="mt-3 text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-200">
                    <svg class="h-6 w-6 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                        </path>
                    </svg>
                </div>
                <h3 class="text-lg leading-6 font-medium text-gray-900 mt-4">Contact Us</h3>
                <div class="mt-4 px-7 py-3">
                    <p class="text-sm text-gray-500">For direct inquiries, please contact:</p>
                    <p class="text-lg font-bold text-gray-800 mt-2">Taha Fadhil Abdullah</p>
                    <a href="mailto:hohzjrawy@gmail.com"
                        class="text-gray-900 hover:underline block mt-1">hohzjrawy@gmail.com</a>
                </div>
                <div class="items-center px-4 py-3">
                    <button id="ok-btn"
                        class="px-4 py-2 bg-gray-800 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-black">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-gray-900 text-white py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>&copy; <span id="currentYear"></span> T-Tech Software Solutions. All rights reserved</p>
        </div>
    </footer>

    <script>
        // API configuration - can be overridden by environment
        const API_BASE = window.API_BASE_URL || 'http://localhost:3000/api';
        const SERVER_ENDPOINT = `${API_BASE}/project-submission`;

        async function exponentialBackoffFetch(url, options, maxRetries = 3) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status !== 429 && response.status < 500) return response;
                } catch (error) { console.warn(`Fetch attempt ${i + 1} failed.`, error); }
                if (i < maxRetries - 1) {
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
            throw new Error(`API request failed after ${maxRetries} attempts.`);
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('currentYear').textContent = new Date().getFullYear();

            const contactModal = document.getElementById('contact-modal');
            const contactModalContent = document.getElementById('contact-modal-content');
            const contactLink = document.getElementById('contact-link');
            const contactLinkSidebar = document.getElementById('contact-link-sidebar');
            const servicesLink = document.getElementById('services-link');
            const okBtn = document.getElementById('ok-btn');

            function openContactModal(e) {
                e.preventDefault();
                contactModal.classList.remove('hidden');
            }

            function closeContactModal() {
                contactModal.classList.add('hidden');
            }

            // Contact modal event listeners
            contactLink.addEventListener('click', openContactModal);
            contactLinkSidebar.addEventListener('click', openContactModal);
            okBtn.addEventListener('click', closeContactModal);

            // Close modal when clicking on overlay (but not on content)
            contactModal.addEventListener('click', (e) => {
                if (e.target === contactModal) {
                    closeContactModal();
                }
            });

            // Prevent modal from closing when clicking inside content
            contactModalContent.addEventListener('click', (e) => {
                e.stopPropagation();
            });

            // Services link
            servicesLink.addEventListener('click', (e) => {
                e.preventDefault();
                alert('Services page coming soon!');
            });

            const form = document.getElementById('project-form');
            const messageBox = document.getElementById('message-box');
            
            // Add character counter for project description (Now guaranteed to exist)
            const projectDescriptionField = document.getElementById('projectDescription');
            const counter = document.getElementById('description-count');
            if (projectDescriptionField && counter) {
                projectDescriptionField.addEventListener('input', () => {
                    counter.textContent = projectDescriptionField.value.length;
                });
            }

            function showMessage(message, isError) {
                messageBox.classList.remove('hidden', 'bg-red-100', 'text-red-700', 'bg-green-100', 'text-green-700');
                if (isError) {
                    messageBox.classList.add('bg-red-100', 'text-red-700', 'border', 'border-red-400');
                    messageBox.innerHTML = message;
                } else {
                    messageBox.classList.add('bg-green-100', 'text-green-700', 'border', 'border-green-400');
                    messageBox.textContent = message;
                }
                messageBox.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                messageBox.classList.add('hidden');

                let isValid = true;
                const data = {};
                let errors = [];

                const getFieldValue = (id) => {
                    const input = document.getElementById(id);
                    if (!input) return '';
                    const value = input.value.trim();
                    if (input.hasAttribute('required') && value === '') {
                        errors.push(`${input.previousElementSibling.textContent.replace(' *', '').trim()} is required.`);
                        input.classList.add('border-red-500');
                        isValid = false;
                    } else { input.classList.remove('border-red-500'); }
                    data[id] = value;
                    return value;
                };

                getFieldValue('clientName');
                getFieldValue('contactPerson');
                const email = getFieldValue('email');
                const phone = getFieldValue('phone');
                getFieldValue('projectName');
                getFieldValue('projectDescription'); // <-- Included Project Description
                const dueDate = getFieldValue('dueDate');
                const budget = getFieldValue('budget');
                getFieldValue('duration');

                if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    errors.push('Please enter a valid email address.');
                    document.getElementById('email').classList.add('border-red-500');
                    isValid = false;
                }

                if (phone && !/^\+?[\d\s\(\)-]{7,15}$/.test(phone.replace(/\s/g, ''))) {
                    errors.push('Please enter a valid phone number.');
                    document.getElementById('phone').classList.add('border-red-500');
                    isValid = false;
                }

                const budgetValue = parseFloat(budget);
                if (budget && (isNaN(budgetValue) || budgetValue <= 0)) {
                    errors.push('Budget must be a positive value.');
                    document.getElementById('budget').classList.add('border-red-500');
                    isValid = false;
                } else if (budget) { data['budget'] = budgetValue; }

                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const selectedDate = new Date(dueDate);
                if (dueDate && selectedDate < today) {
                    errors.push('Target Due Date cannot be in the past.');
                    document.getElementById('dueDate').classList.add('border-red-500');
                    isValid = false;
                }

                if (!isValid) {
                    showMessage(`<ul class="list-disc list-inside">${errors.map(err => `<li>${err}</li>`).join('')}</ul>`, true);
                    return;
                }

                const submitButton = e.submitter;
                submitButton.disabled = true;
                submitButton.textContent = 'Sending...';

                try {
                    const response = await exponentialBackoffFetch(SERVER_ENDPOINT, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(data)
                    }, 3);

                    if (response.ok) {
                        let serverMessage = 'Your inquiry has been sent.';
                        try {
                            const serverResult = await response.json();
                            if (serverResult.message) serverMessage = serverResult.message;
                        } catch (e) { /* ignore */ }
                        showMessage(`Success! ${serverMessage}`, false);
                        form.reset();
                    } else {
                        let errorDetails = `Error: ${response.status} ${response.statusText}`;
                        try {
                            const errorJson = await response.json();
                            if (errorJson.message) errorDetails = errorJson.message;
                        } catch (e) { /* ignore */ }
                        throw new Error(`Server error: ${errorDetails}`);
                    }
                } catch (error) {
                    let errorMessage = 'Submission failed. Please try again.';
                    if (error.message.includes('fetch')) {
                        errorMessage = 'Unable to connect to server. Please check your internet connection and try again.';
                    } else if (error.message) {
                        errorMessage = error.message;
                    }
                    showMessage(errorMessage, true);
                } finally {
                    submitButton.disabled = false;
                    submitButton.textContent = 'Submit Inquiry →';
                }
            });
        });
    </script>
</body>

</html>
